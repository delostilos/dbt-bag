version: 2

common_config: &common_config
  namespaces: 
    DatatypenNEN3610: "www.kadaster.nl/schemas/lvbag/imbag/datatypennen3610/v20200601" 
    Objecten: "www.kadaster.nl/schemas/lvbag/imbag/objecten/v20200601" 
    gml: "http://www.opengis.net/gml/3.2" 
    Historie: "www.kadaster.nl/schemas/lvbag/imbag/historie/v20200601" 
    Objecten-ref: "www.kadaster.nl/schemas/lvbag/imbag/objecten-ref/v20200601" 
    nen5825: "www.kadaster.nl/schemas/lvbag/imbag/nen5825/v20200601" 
    KenmerkInOnderzoek: "www.kadaster.nl/schemas/lvbag/imbag/kenmerkinonderzoek/v20200601" 
    selecties-extract: "http://www.kadaster.nl/schemas/lvbag/extract-selecties/v20200601" 
    sl-bag-extract: "http://www.kadaster.nl/schemas/lvbag/extract-deelbestand-lvc/v20200601" 
    sl: "http://www.kadaster.nl/schemas/standlevering-generiek/1.0" 
    xsi: "http://www.w3.org/2001/XMLSchema-instance" 
    xs: "http://www.w3.org/2001/XMLSchema" 
    gwr-bestand: "www.kadaster.nl/schemas/lvbag/gem-wpl-rel/gwr-deelbestand-lvc/v20200601"
    bagtypes: "www.kadaster.nl/schemas/lvbag/gem-wpl-rel/bag-types/v20200601"
    gwr-product: "www.kadaster.nl/schemas/lvbag/gem-wpl-rel/gwr-producten-lvc/v20200601"
    xb: "http://www.kadaster.nl/schemas/lvbag/extract-levering/v20200601"
  
models:
- name: stand_levering
  config:
    <<: *common_config
    # standaard table config 'omhoog' gehaald om te kunnen gebruiken in de Python module, later via yaml anchor 'omlaag' halen          
    table: &levering_table
      meta:
        xpath: /xb:BAG-Extract-Levering
      columns: 
      - name: stand_technische_datum
        meta:
          xpath: xb:SelectieGegevens/selecties-extract:LVC-Extract/selecties-extract:StandTechnischeDatum
      - name: stand_gemeente
        meta:
          xpath: xb:SelectieGegevens/selecties-extract:Gebied-Registratief/selecties-extract:Gebied-GEM/selecties-extract:GemeenteCollectie/selecties-extract:Gemeente/selecties-extract:GemeenteIdentificatie
      - name: stand_schema_xsd
        meta:
          xpath: xb:SchemaInfo/xb:naam
      - name: stand_schema_versie
        meta:
          xpath: xb:SchemaInfo/xb:versie
  <<: *levering_table 
- name: stand_ligplaats
  config: 
    mnemonic: LIG
- name: stand_nummeraanduiding
  config: 
    mnemonic: NUM
- name: stand_openbareruimte
  config: 
    mnemonic: OPR    
- name: stand_pand
  config: 
    <<: *common_config
    mnemonic: PND      
- name: stand_standplaats
  config:   
    mnemonic: STA         
- name: stand_verblijfsobject
  config: 
    mnemonic: VBO          
- name: stand_woonplaats
  config: 
    mnemonic: WPL  
- name: stand_gemeente_woonplaats
  config:
    <<: *common_config
    # standaard table config 'omhoog' gehaald om te kunnen gebruiken in de Python module, later via yaml anchor 'omlaag' halen          
    table: &gemeente_woonplaats_table
      meta:
        xpath: /gwr-bestand:BAG-GWR-Deelbestand-LVC/gwr-bestand:Product/gwr-product:GemeenteWoonplaatsRelatieProduct/gwr-product:GemeenteWoonplaatsRelatie
      columns: 
      - name: begin_geldigheid
        meta:
          xpath: gwr-product:tijdvakgeldigheid/bagtypes:begindatumTijdvakGeldigheid
      - name: eind_geldigheid
        meta:
          xpath: gwr-product:tijdvakgeldigheid/bagtypes:einddatumTijdvakGeldigheid
      - name: woonplaats_identificatie
        meta:
          xpath: gwr-product:gerelateerdeWoonplaats/gwr-product:identificatie
      - name: gemeente_identificatie
        meta:
          xpath: gwr-product:gerelateerdeGemeente/gwr-product:identificatie
      - name: status 
        meta:
          xpath: gwr-product:status
  <<: *gemeente_woonplaats_table   
- name: stand_gemeente
  config:
    materialized: table    